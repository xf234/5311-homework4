<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D3 Bubble Chart</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<body>
    <svg width="800" height="600"></svg>

    <script>
        // Sample data
        const data = [
            { name: "A", value: 50, group: "Group 1" },
            { name: "B", value: 30, group: "Group 1" },
            { name: "C", value: 60, group: "Group 1" },
            { name: "D", value: 20, group: "Group 2" },
            { name: "E", value: 40, group: "Group 2" },
            { name: "F", value: 70, group: "Group 2" }
        ];

        // Setup SVG
        const svg = d3.select("svg"),
            width = +svg.attr("width"),
            height = +svg.attr("height");

        // Setup scales
        const radiusScale = d3.scaleSqrt()
            .domain([0, d3.max(data, d => d.value)])
            .range([5, 50]);

        // Setup simulation
        const simulation = d3.forceSimulation(data)
            .force("x", d3.forceX(width / 2).strength(0.05))
            .force("y", d3.forceY(height / 2).strength(0.05))
            .force("collide", d3.forceCollide(d => radiusScale(d.value) + 2));

        // Create circles
        const circles = svg.selectAll("circle")
            .data(data)
            .enter().append("circle")
            .attr("r", d => radiusScale(d.value))
            .attr("fill", "steelblue")
            .attr("opacity", 0.7);

        // Add labels
        const labels = svg.selectAll("text")
            .data(data)
            .enter().append("text")
            .attr("text-anchor", "middle")
            .attr("alignment-baseline", "middle")
            .style("font-size", "12px")
            .text(d => d.name);

        // Run simulation
        simulation.on("tick", () => {
            circles.attr("cx", d => d.x)
                .attr("cy", d => d.y);

            labels.attr("x", d => d.x)
                .attr("y", d => d.y);
        });
    </script>
</body>

</html>